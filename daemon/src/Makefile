FLAGS=-O2
CC=g++
LD=g++

# default compile run...
%.o : %.cpp
	${CC} ${FLAGS} -c $<

# some defines...
LIBS=-lcurl
OBJS=logger.o resource_server_api.o xml.o csv.o hash.o binhex.o daemon_configclass.o daemon_jobclass.o daemon_mainclass.o daemon_main.o xml_main.o binhex_main.o hexbin_main.o hash_main.o csv_main.o

# default target...
all : LGI_daemon.x xml binhex hexbin hash csv

xml : xml.o csv.o xml_main.o
	${LD} ${FLAGS} -o $@ xml.o csv.o xml_main.o

binhex : binhex.o binhex_main.o
	${LD} ${FLAGS} -o $@ binhex.o binhex_main.o

hexbin : binhex.o hexbin_main.o
	${LD} ${FLAGS} -o $@ binhex.o hexbin_main.o

hash : hash.o binhex.o hash_main.o
	${LD} ${FLAGS} -o $@ hash.o binhex.o hash_main.o

csv : csv.o csv_main.o
	${LD} ${FLAGS} -o $@ csv.o csv_main.o

LGI_daemon.x : logger.o resource_server_api.o xml.o csv.o hash.o binhex.o daemon_configclass.o daemon_jobclass.o daemon_mainclass.o daemon_main.o
	${LD} ${FLAGS} -o $@ logger.o resource_server_api.o xml.o csv.o hash.o binhex.o daemon_configclass.o daemon_jobclass.o daemon_mainclass.o daemon_main.o ${LIBS}

# dependancies...
xml_main.o : xml_main.cpp xml.h csv.h

binhex_main.o : binhex_main.cpp binhex.h

hexbin_main.o : hexbin_main.cpp binhex.h

hash_main.o : hash_main.cpp hash.h binhex.h

csv_main.o : csv_main.cpp csv.h

daemon_main.o : daemon_main.cpp logger.h resource_server_api.h binhex.h hash.h csv.h xml.h daemon_configclass.h daemon_jobclass.h daemon_mainclass.h

daemon_mainclass.o : daemon_mainclass.cpp daemon_mainclass.h daemon_jobclass.h daemon_configclass.h resource_server_api.h xml.h binhex.h csv.h hash.h


daemon_main.o : daemon_main.cpp logger.h resource_server_api.h binhex.h hash.h csv.h xml.h daemon_configclass.h daemon_jobclass.h daemon_mainclass.h

daemon_mainclass.o : daemon_mainclass.cpp daemon_mainclass.h daemon_jobclass.h daemon_configclass.h resource_server_api.h xml.h binhex.h csv.h hash.h

daemon_jobclass.o : daemon_jobclass.cpp daemon_jobclass.h daemon_configclass.h resource_server_api.h xml.h binhex.h csv.h hash.h

daemon_configclass.o : daemon_configclass.cpp daemon_configclass.h xml.h binhex.h csv.h hash.h

resource_server_api.o : resource_server_api.cpp resource_server_api.h

logger.o : logger.cpp logger.h
xml.o : xml.cpp xml.h
csv.o : csv.cpp csv.h
binhex.o : binhex.cpp binhex.h
hash.o : hash.cpp hash.h

# clean up...
clean :
	rm ${OBJS} LGI_daemon.x xml binhex hexbin hash csv
